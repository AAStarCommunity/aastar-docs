import{_ as a,c as t,o as e,ag as i}from"./chunks/framework.dvv-DFtf.js";const g=JSON.parse('{"title":"ğŸ“Š AAStar Gas Analytics & Experimentation","description":"","frontmatter":{},"headers":[],"relativePath":"api/@aastar/analytics/index.md","filePath":"api/@aastar/analytics/index.md","lastUpdated":1769265003000}'),n={name:"api/@aastar/analytics/index.md"};function r(l,s,o,p,c,h){return e(),t("div",null,[...s[0]||(s[0]=[i(`<h1 id="ğŸ“Š-aastar-gas-analytics-experimentation" tabindex="-1">ğŸ“Š AAStar Gas Analytics &amp; Experimentation <a class="header-anchor" href="#ğŸ“Š-aastar-gas-analytics-experimentation" aria-label="Permalink to &quot;ğŸ“Š AAStar Gas Analytics &amp; Experimentation&quot;">â€‹</a></h1><blockquote><p><strong>Status</strong>: Active | <strong>Version</strong>: 3.0 (PhD Research Edition)</p></blockquote><p>This module is the core data intelligence engine for the AAStar ecosystem. It has been upgraded to support <strong>Scientific Data Collection</strong> for the &quot;Asset-Oriented Abstraction&quot; thesis, moving beyond simple log analysis to rigorous, on-chain ground truth verification. å·¥ä½œæµï¼š</p><p>æ”¶é›†æ•°æ®ï¼ˆæ—¥å¸¸è¿è¡Œï¼‰ï¼š pnpm tsx scripts/run_analytics_coordinator.ts --network sepolia äº§ç”Ÿæ–°å®éªŒæ•°æ®ï¼ˆéœ€è¦æ—¶è¿è¡Œï¼‰ï¼š pnpm tsx scripts/run_analytics_coordinator.ts --network sepolia --gen-traffic</p><p>æ”¶é›†events pnpm tsx scripts/run_analytics_coordinator.ts --network sepolia --fetch-events</p><p>åˆ†ææŠ¥å‘Šï¼ˆæŸ¥çœ‹ç»“æœï¼‰ï¼š pnpm tsx packages/analytics/src/gas-analyzer-v4.ts --network sepolia</p><h2 id="æ­¥éª¤æ˜¯è§£è€¦çš„-æŒ‰éœ€æ‰§è¡Œå³å¯" tabindex="-1">æ­¥éª¤æ˜¯è§£è€¦çš„ï¼ŒæŒ‰éœ€æ‰§è¡Œå³å¯ <a class="header-anchor" href="#æ­¥éª¤æ˜¯è§£è€¦çš„-æŒ‰éœ€æ‰§è¡Œå³å¯" aria-label="Permalink to &quot;æ­¥éª¤æ˜¯è§£è€¦çš„ï¼ŒæŒ‰éœ€æ‰§è¡Œå³å¯&quot;">â€‹</a></h2><h2 id="ğŸ—-system-architecture" tabindex="-1">ğŸ— System Architecture <a class="header-anchor" href="#ğŸ—-system-architecture" aria-label="Permalink to &quot;ğŸ— System Architecture&quot;">â€‹</a></h2><p>The Analytics module operates on a <strong>Pipeline Architecture</strong> composed of three distinct stages: <strong>Generation</strong>, <strong>Collection</strong>, and <strong>Analysis</strong>.</p><div class="language-mermaid vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;Phase 1: Traffic Generation&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TG[Traffic Coordinator] --&gt;|Trigger| G1[EOA Generator]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TG --&gt;|Trigger| G2[Standard AA Generator]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TG --&gt;|Trigger| G3[SuperPaymaster Generator]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TG --&gt;|Trigger| G4[Paymaster V4 Generator]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        G1 &amp; G2 &amp; G3 &amp; G4 --&gt;|Execute Tx| BLOCKCHAIN((Blockchain))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;Phase 2: Data Collection&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        BLOCKCHAIN --&gt;|Receipts| HF[Historical Fetcher]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        HF --&gt;|Raw Data| CACHE[(Data Store / JSON)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        style HF fill:#f9f,stroke:#333</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;Phase 3: Analysis Engine&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CACHE --&gt;|Load| DC[DataCollector]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        DC --&gt;|Enrich| CC[CostCalculator]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CC --&gt; AA[Attribution Analyzer]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CC --&gt; CA[Comparison Analyzer]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CC --&gt; TA[Trend Analyzer]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        AA &amp; CA &amp; TA --&gt; REPORT[Final Academic Report]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span></code></pre></div><hr><h2 id="ğŸ§©-key-modules" tabindex="-1">ğŸ§© Key Modules <a class="header-anchor" href="#ğŸ§©-key-modules" aria-label="Permalink to &quot;ğŸ§© Key Modules&quot;">â€‹</a></h2><h3 id="_1-traffic-generators-src-generators" tabindex="-1">1. Traffic Generators (<code>src/generators/</code>) <a class="header-anchor" href="#_1-traffic-generators-src-generators" aria-label="Permalink to &quot;1. Traffic Generators (\`src/generators/\`)&quot;">â€‹</a></h3><p>Responsible for creating controlled, verifiable traffic patterns on testnets (Sepolia, OP Sepolia) and mainnets.</p><ul><li><strong>EOAGenerator</strong>: Baseline ETH transfers to measure intrinsic network costs.</li><li><strong>StandardAAGenerator</strong>: ERC-4337 flows using industry-standard Paymasters (Pimlico/Alchemy).</li><li><strong>SuperPaymasterGenerator</strong>: <strong>Treatment Group</strong>. Uses the <code>EndUserClient</code> to execute gasless transactions via the &quot;Credit/Asset-Oriented&quot; model (Dual-Token).</li><li><strong>PaymasterV4Generator</strong>: <strong>Treatment Group B</strong>. Uses the &quot;Deposit&quot; model (Single-Token) for comparative analysis.</li></ul><h3 id="_2-data-collectors-src-collectors" tabindex="-1">2. Data Collectors (<code>src/collectors/</code>) <a class="header-anchor" href="#_2-data-collectors-src-collectors" aria-label="Permalink to &quot;2. Data Collectors (\`src/collectors/\`)&quot;">â€‹</a></h3><p>Responsible for gathering &quot;Ground Truth&quot; data.</p><ul><li><strong>HistoricalFetcher</strong>: Connects to Etherscan/OptimismScan APIs to retrieve full transaction histories for test accounts defined in <code>l4-state.json</code>. <strong>Crucial for auditability.</strong></li><li><strong>LogParser</strong>: Legacy parser for development logs (kept for backward compatibility).</li></ul><h3 id="_3-analysis-engine-src-core-src-analyzers" tabindex="-1">3. Analysis Engine (<code>src/core/</code> &amp; <code>src/analyzers/</code>) <a class="header-anchor" href="#_3-analysis-engine-src-core-src-analyzers" aria-label="Permalink to &quot;3. Analysis Engine (\`src/core/\` &amp; \`src/analyzers/\`)&quot;">â€‹</a></h3><p>The brain of the operation.</p><ul><li><strong>Double-Layer Analysis</strong>: <ul><li><strong>Intrinsic Layer</strong>: Gas used, Blob gas, Calldata efficiency.</li><li><strong>Economic Layer</strong>: USD costs, Protocol Revenue, Net Profit.</li></ul></li><li><strong>Attribution</strong>: Breaks down cost into L1 Security, L2 Execution, and Protocol Overhead.</li></ul><hr><h2 id="ğŸš€-workflows" tabindex="-1">ğŸš€ Workflows <a class="header-anchor" href="#ğŸš€-workflows" aria-label="Permalink to &quot;ğŸš€ Workflows&quot;">â€‹</a></h2><h3 id="a-run-full-experiment-coordinator" tabindex="-1">A. Run Full Experiment (Coordinator) <a class="header-anchor" href="#a-run-full-experiment-coordinator" aria-label="Permalink to &quot;A. Run Full Experiment (Coordinator)&quot;">â€‹</a></h3><p>The <code>run_analytics_coordinator.ts</code> script orchestrates the entire lifecycle.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. Fetch History -&gt; 2. Generate Missing Traffic -&gt; 3. Analyze</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tsx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/run_analytics_coordinator.ts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sepolia</span></span></code></pre></div><h3 id="b-fetch-historical-data-only" tabindex="-1">B. Fetch Historical Data Only <a class="header-anchor" href="#b-fetch-historical-data-only" aria-label="Permalink to &quot;B. Fetch Historical Data Only&quot;">â€‹</a></h3><p>Useful for auditing existing accounts without spending gas.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tsx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scripts/run_analytics_coordinator.ts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --fetch-only</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> op-sepolia</span></span></code></pre></div><h3 id="c-traffic-generation-only" tabindex="-1">C. Traffic Generation Only <a class="header-anchor" href="#c-traffic-generation-only" aria-label="Permalink to &quot;C. Traffic Generation Only&quot;">â€‹</a></h3><p>Generate a specific number of transactions for a specific group.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tsx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/analytics/src/generators/cli.ts</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --group</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> superpaymaster</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --runs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span></code></pre></div><hr><h2 id="ğŸ“Š-data-metrics" tabindex="-1">ğŸ“Š Data &amp; Metrics <a class="header-anchor" href="#ğŸ“Š-data-metrics" aria-label="Permalink to &quot;ğŸ“Š Data &amp; Metrics&quot;">â€‹</a></h2><p>We prioritize <strong>Intrinsic Metrics</strong> to ensure scientific validity independent of market volatility.</p><table tabindex="0"><thead><tr><th style="text-align:left;">Metric</th><th style="text-align:left;">Definition</th><th style="text-align:left;">Source</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>Gas Used</strong></td><td style="text-align:left;">Total gas consumed by the transaction</td><td style="text-align:left;"><code>receipt.gasUsed</code></td></tr><tr><td style="text-align:left;"><strong>L1 Fee</strong></td><td style="text-align:left;">Cost of posting data to L1 (for L2s)</td><td style="text-align:left;">Oracle Contract / Header</td></tr><tr><td style="text-align:left;"><strong>Latency</strong></td><td style="text-align:left;">Time from <code>UserOp</code> submission to inclusion</td><td style="text-align:left;">Client-side Timestamp</td></tr><tr><td style="text-align:left;"><strong>Steps</strong></td><td style="text-align:left;">Number of signatures/interactions required</td><td style="text-align:left;">Protocol Definition</td></tr></tbody></table><hr><h2 id="ğŸ“‚-directory-structure" tabindex="-1">ğŸ“‚ Directory Structure <a class="header-anchor" href="#ğŸ“‚-directory-structure" aria-label="Permalink to &quot;ğŸ“‚ Directory Structure&quot;">â€‹</a></h2><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>packages/analytics/</span></span>
<span class="line"><span>â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ generators/       # [NEW] Traffic Generation Logic</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ collectors/       # [NEW] Etherscan/RPC Fetchers</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ core/             # Core Analysis Engines</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ analyzers/        # Specific Analysis Strategies</span></span>
<span class="line"><span>â”‚   â””â”€â”€ gas-analyzer.ts   # Main Entry Point</span></span>
<span class="line"><span>â”œâ”€â”€ data/                 # Raw JSON Data Store</span></span>
<span class="line"><span>â””â”€â”€ reports/              # HTML/Markdown Reports</span></span></code></pre></div>`,39)])])}const k=a(n,[["render",r]]);export{g as __pageData,k as default};
